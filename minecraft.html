<!-- minecraft.html -->
<script type="text/html" data-template-name="minecraft-server-config">
    <div class="form-row">
        <label for="node-config-input-host"><i class="fa fa-globe"></i> Host</label>
        <input type="text" id="node-config-input-host" placeholder="localhost">
    </div>
    <div class="form-row">
        <label for="node-config-input-rconPort"><i class="fa fa-random"></i> RCON Port</label>
        <input type="text" id="node-config-input-rconPort" placeholder="25575">
    </div>
    <div class="form-row">
        <label for="node-config-input-rconPassword"><i class="fa fa-lock"></i> RCON Password</label>
        <input type="password" id="node-config-input-rconPassword">
    </div>
</script>

<script type="text/html" data-template-name="minecraft-rcon">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-server"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-command"><i class="fa fa-terminal"></i> Default Command</label>
        <input type="text" id="node-input-command" placeholder="list">
    </div>
</script>

<script type="text/html" data-template-name="minecraft-server-info">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-server"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
</script>

<script type="text/html" data-template-name="minecraft-player-info">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-server"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-infoType"><i class="fa fa-info"></i> Info Type</label>
        <select id="node-input-infoType">
            <option value="health">Health</option>
            <option value="position">Position</option>
            <option value="inventory">Inventory</option>
            <option value="experience">Experience</option>
            <option value="gamemode">Game Mode</option>
            <option value="food">Food Level</option>
            <option value="effects">Active Effects</option>
            <option value="score">Scoreboard</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-player"><i class="fa fa-user"></i> Default Player</label>
        <input type="text" id="node-input-player" placeholder="@p">
    </div>
</script>

<script type="text/html" data-template-name="minecraft-player-manage">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-server"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-tasks"></i> Action</label>
        <select id="node-input-action">
            <option value="kick">Kick</option>
            <option value="ban">Ban</option>
            <option value="pardon">Pardon</option>
            <option value="gamemode">Change Gamemode</option>
            <option value="tp">Teleport</option>
            <option value="give">Give Item</option>
            <option value="clear">Clear Inventory</option>
            <option value="kill">Kill</option>
            <option value="xp">Give XP</option>
        </select>
    </div>
</script>

<script type="text/html" data-template-name="minecraft-world">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-server"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-globe"></i> Action</label>
        <select id="node-input-action">
            <option value="time">Set Time</option>
            <option value="weather">Set Weather</option>
            <option value="difficulty">Set Difficulty</option>
            <option value="gamerule">Set Gamerule</option>
            <option value="worldborder">Set World Border</option>
            <option value="setworldspawn">Set World Spawn</option>
        </select>
    </div>
</script>

<script type="text/html" data-template-name="minecraft-block">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-server"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-cube"></i> Action</label>
        <select id="node-input-action">
            <option value="set">Set Block</option>
            <option value="fill">Fill Area</option>
            <option value="clone">Clone Area</option>
            <option value="info">Get Block Info</option>
        </select>
    </div>
</script>

<script type="text/html" data-template-name="minecraft-entity">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-server"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-bug"></i> Action</label>
        <select id="node-input-action">
            <option value="spawn">Spawn Entity</option>
            <option value="kill">Kill Entity</option>
            <option value="count">Count Entities</option>
            <option value="info">Get Entity Info</option>
            <option value="modify">Modify Entity</option>
        </select>
    </div>
</script>

<script type="text/html" data-template-name="minecraft-server-manage">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-server"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-cogs"></i> Action</label>
        <select id="node-input-action">
            <option value="save-all">Save World</option>
            <option value="save-off">Disable Saving</option>
            <option value="save-on">Enable Saving</option>
            <option value="stop">Stop Server</option>
            <option value="whitelist">Manage Whitelist</option>
            <option value="op">Op Player</option>
            <option value="deop">Deop Player</option>
            <option value="broadcast">Broadcast Message</option>
        </select>
    </div>
</script>

<!-- Help Documentation -->

<script type="text/html" data-help-name="minecraft-rcon">
    <p>Sends raw RCON commands to a Minecraft server.</p>
    
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>The Minecraft command to execute (e.g., "time set day")</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>The response from the server</dd>
    </dl>
</script>

<script type="text/html" data-help-name="minecraft-server-info">
    <p>Gets the current status of the Minecraft server.</p>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>
            <ul>
                <li><b>online</b>: Number of players online</li>
                <li><b>max</b>: Maximum player capacity</li>
                <li><b>version</b>: Server version</li>
                <li><b>players</b>: Array of online players</li>
            </ul>
        </dd>
    </dl>
</script>

<script type="text/html" data-help-name="minecraft-player-info">
    <p>Retrieves information about a player.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>Player name or selector (e.g., "Steve" or "@p")</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>
            <ul>
                <li><b>raw</b>: Raw server response</li>
                <li><b>value</b>: Parsed value</li>
                <li><b>player</b>: Player queried</li>
                <li><b>type</b>: Info type queried</li>
            </ul>
        </dd>
    </dl>
</script>

<script type="text/html" data-help-name="minecraft-player-manage">
    <p>Manages player actions and properties.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>Value depends on action:
            <ul>
                <li><b>kick/ban/pardon</b>: Player name</li>
                <li><b>gamemode</b>: Gamemode name (survival/creative/etc.)</li>
                <li><b>tp</b>: Coordinates (e.g., "0 64 0")</li>
                <li><b>give</b>: "item amount" (e.g., "diamond 64")</li>
                <li><b>xp</b>: XP amount (e.g., "10L" or "100")</li>
            </ul>
        </dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>Server response message</dd>
    </dl>
</script>

<script type="text/html" data-help-name="minecraft-world">
    <p>Controls world settings and environment.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>Value depends on action:
            <ul>
                <li><b>time</b>: "day", "night", or number</li>
                <li><b>weather</b>: "clear", "rain", or "thunder"</li>
                <li><b>difficulty</b>: "peaceful", "easy", "normal", "hard"</li>
                <li><b>gamerule</b>: "rule value" (e.g., "doDaylightCycle true")</li>
                <li><b>worldborder</b>: Border size (number)</li>
                <li><b>setworldspawn</b>: Coordinates (e.g., "0 64 0")</li>
            </ul>
        </dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>Server response message</dd>
    </dl>
</script>

<script type="text/html" data-help-name="minecraft-block">
    <p>Manages blocks in the world.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>Value format depends on action (use | as separator):
            <ul>
                <li><b>set</b>: "coordinates|block" (e.g., "0 64 0|stone")</li>
                <li><b>fill</b>: "start_coords|end_coords|block"</li>
                <li><b>clone</b>: "source_coords|destination_coords"</li>
                <li><b>info</b>: "coordinates"</li>
            </ul>
        </dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>
            <ul>
                <li><b>raw</b>: Raw server response</li>
                <li><b>action</b>: Action performed</li>
                <li><b>result</b>: Parsed response data</li>
            </ul>
        </dd>
    </dl>
</script>

<script type="text/html" data-help-name="minecraft-entity">
    <p>Manages entities in the world.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>Value format depends on action (use | as separator):
            <ul>
                <li><b>spawn</b>: "entity|coordinates|nbt" (e.g., "zombie|~ ~2 ~|{powered:1}")</li>
                <li><b>kill</b>: Entity selector (e.g., "@e[type=zombie]")</li>
                <li><b>count</b>: Entity selector</li>
                <li><b>info</b>: Entity selector</li>
                <li><b>modify</b>: "selector|nbt_data"</li>
            </ul>
        </dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>
            <ul>
                <li><b>raw</b>: Raw server response</li>
                <li><b>action</b>: Action performed</li>
                <li><b>result</b>: Parsed response data</li>
            </ul>
        </dd>
    </dl>
</script>

<script type="text/html" data-help-name="minecraft-server-manage">
    <p>Manages server operations.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>Value depends on action:
            <ul>
                <li><b>whitelist</b>: "add playername" or "remove playername"</li>
                <li><b>op/deop</b>: Player name</li>
                <li><b>broadcast</b>: Message to broadcast</li>
                <li>Other actions don't require payload</li>
            </ul>
        </dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>Server response message</dd>
    </dl>
</script>

<script type="text/javascript">
    RED.nodes.registerType('minecraft-server-config', {
        category: 'config',
        defaults: {
            host: { value: "localhost", required: true },
            rconPort: { value: 25575, required: true, validate: RED.validators.number() },
            rconPassword: { value: "", required: true }
        },
        label: function() {
            return this.host + ":" + this.rconPort;
        }
    });

    RED.nodes.registerType('minecraft-rcon', {
        category: 'minecraft',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            server: { type: "minecraft-server-config", required: true },
            command: { value: "" }
        },
        inputs: 1,
        outputs: 1,
        icon: "file.png",
        label: function() {
            return this.name || "minecraft rcon";
        }
    });

    RED.nodes.registerType('minecraft-server-info', {
        category: 'minecraft',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            server: { type: "minecraft-server-config", required: true }
        },
        inputs: 1,
        outputs: 1,
        icon: "status.png",
        label: function() {
            return this.name || "server info";
        }
    });

    RED.nodes.registerType('minecraft-server-manage', {
        category: 'minecraft',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            server: { type: "minecraft-server-config", required: true },
            action: { value: "save-all" }
        },
        inputs: 1,
        outputs: 1,
        icon: "server.png",
        label: function() {
            return this.name || "server manage";
        }
    });

    RED.nodes.registerType('minecraft-player-info', {
        category: 'minecraft',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            server: { type: "minecraft-server-config", required: true },
            infoType: { value: "health" },
            player: { value: "@p" }
        },
        inputs: 1,
        outputs: 1,
        icon: "user.png",
        label: function() {
            return this.name || "player info";
        }
    });

    RED.nodes.registerType('minecraft-player-manage', {
        category: 'minecraft',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            server: { type: "minecraft-server-config", required: true },
            action: { value: "kick" }
        },
        inputs: 1,
        outputs: 1,
        icon: "user-cog.png",
        label: function() {
            return this.name || "player manage";
        }
    });

    RED.nodes.registerType('minecraft-world', {
        category: 'minecraft',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            server: { type: "minecraft-server-config", required: true },
            action: { value: "time" }
        },
        inputs: 1,
        outputs: 1,
        icon: "globe.png",
        label: function() {
            return this.name || "world";
        }
    });

    RED.nodes.registerType('minecraft-block', {
        category: 'minecraft',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            server: { type: "minecraft-server-config", required: true },
            action: { value: "set" }
        },
        inputs: 1,
        outputs: 1,
        icon: "cube.png",
        label: function() {
            return this.name || "block";
        }
    });

    RED.nodes.registerType('minecraft-entity', {
        category: 'minecraft',
        color: '#a6bbcf',
        defaults: {
            name: { value: "" },
            server: { type: "minecraft-server-config", required: true },
            action: { value: "spawn" }
        },
        inputs: 1,
        outputs: 1,
        icon: "bug.png",
        label: function() {
            return this.name || "entity";
        }
    });
</script>